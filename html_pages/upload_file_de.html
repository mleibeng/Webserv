<!DOCTYPE html>
<html lang="de">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Datei hochladen</title>
	<link rel="stylesheet" href="style.css">
</head>

<body>
	<div class="switch-lang">
		<a href="upload_file_en.html" class="button">Wechseln zur englischen Version</a>
	</div>

	<div class="content">
		<form action="/uploads" method="post" enctype="multipart/form-data">
			<label for="fileToUpload">Wählen Sie eine Datei zum Hochladen:</label>
			<input type="file" id="fileToUpload" name="fileToUpload" required>

			<input type="submit" value="Datei hochladen">
		</form>

		<h2>Hochgeladene Dateien</h2>
		<ul id="fileList">
			<li>
				<span>test.txt</span>
				<button class="delete-btn" onclick="deleteFile('test.txt')">Löschen</button>
			</li>
		</ul>

		<div class="links">
			<a href="index_de.html" class="button">Zurück zur Startseite</a>
		</div>
	</div>

	<script>
		async function deleteFile(filename) {
			try {
				const response = await fetch(`/uploads/${filename}`, {
					method: 'DELETE',
				});

				if (response.ok) {
					alert('File deleted successfully');
					location.reload();
				} else {
					alert('Failed to delete file');
				}
			} catch (error) {
				console.error('Error:', error);
				alert('An error occurred');
			}
		}
	</script>
</body>

</html>
